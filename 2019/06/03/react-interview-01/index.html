<!DOCTYPE html>
<html lang="zh-CN">

  
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta name="author" content="å¼ é”¦æ°">
  
  
  
  <title>Meils çš„ Blog</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="React,é¢è¯•,React,">
  

  <script>
    console.log('\n%c Hexo-theme-bmw v4.0 ' + '%c ğŸ‰ https://github.com/dongyuanxin/theme-bmw ğŸ‰\n' + '\n%c View demo online ' + '%c ğŸ” https://godbmw.com/ ğŸ”  \n' , 'color: #fadfa3; background: #030307; padding:3px 0;', '', 'color: #fadfa3; background: #030307; padding:3px 0;', '');
  </script>

  

  

  
    <link rel="icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/touch-icon.png">
  

  <link href="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/icon/iconfont.css">
<link rel="stylesheet" href="/css/github-markdown.css">
<link rel="stylesheet" href="/css/highlight.css">

  <script src="/js/util.js"></script>
<script src="/js/valine.min.js"></script>

  

  
    <link href="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.js" async></script>
  

  
    <link href="https://cdn.bootcss.com/social-share.js/1.0.16/css/share.min.css" rel="stylesheet">
  
  
  <script src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js" async></script>
  
  
    <script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.11.0/dist/av-min.js"></script>
  

</head>

  <body>

    

    <div id="app">

      <div class="header-wrap">
  <header>
    <div class="site-brand">
      <div class="site-title">
        <a href="/">å¼ é”¦æ° çš„ Blog</a>
      </div>
    </div>
    <nav class="site-navigation">
      <ul class="nav-menu">
      
        <li class="nav-item" data-path="/">
          
            <a href="/" target="_self">
              ä¸»é¡µ
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/archives/">
          
            <a href="/archives/" target="_self">
              å½’æ¡£
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/categories/">
          
            <a href="/categories/" target="_self">
              åˆ†ç±»
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/tags/">
          
            <a href="/tags/" target="_self">
              æ ‡ç­¾
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/friends/">
          
            <a href="/friends/" target="_self">
              å‹é“¾
            </a>
          
        </li>
      
        <li class="nav-item" data-path>
          
            <a href="javascript:void(0);" v-else>æŠ“åˆ°æˆ‘</a>
            <ul class="nav-menu--dropdown">
              
                <li>
                  <a href="https://github.com/zjj1392372716" target="_blank">
                    Github
                  </a>
                </li>
              
                <li>
                  <a href="https://juejin.im/user/5a1cbb46518825592c07d5f6" target="_blank">
                    æ˜é‡‘
                  </a>
                </li>
              
                <li>
                  <a href="https://segmentfault.com/u/guchengshaonian_5a56fe95f2c32" target="_blank">
                    æ€å¦
                  </a>
                </li>
              
            </ul>
          
        </li>
      
      </ul>
    </nav>
    <i class="iconfont icon-menu"></i>
  </header>
</div>

<script>
  let links = document.querySelectorAll('.nav-item');
  for(let link of links){
    let childrenLink = link.querySelector('ul');
    link.addEventListener('mouseenter', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown active";
      }
    })
    link.addEventListener('mouseleave', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown";
      }
    })
  }
  let rootRealPath = getRealPath(window.location.pathname, true);
  for(let link of links) {
    let linkPath = link.getAttribute("data-path");
    if(linkPath && getRealPath(linkPath, true) === rootRealPath) {
      link.className = "nav-item hover";
    }
  }

  let iconMenu = document.querySelector("i.iconfont.icon-menu"),
    iconMenuClicked = false;
  let navDOM = document.querySelector("nav.site-navigation");
  iconMenu.addEventListener("click", () => {
    iconMenuClicked 
      ? navDOM.className = "site-navigation active"
      : navDOM.className = "site-navigation";
    iconMenuClicked = !iconMenuClicked;
  })
</script>

      








<div class="container post-index">

  

<div class="post">
  <h1 class="article-title">
    <span>React ä»åŸºç¡€åˆ°è¿›é˜¶ï¼ˆä¸€ï¼‰</span>
  </h1>
  <div class="article-top-meta">
    <span>
      å‘å¸ƒ : 
      2019-06-03
    </span>
    
      <span>
        åˆ†ç±» : 
          <a href="/categories/React/">
            React
          </a>
      </span>
    
    
      <span>
        æµè§ˆ : <span class="article-timer" data-identity="react-interview-01"></span>
      </span>
    
  </div>

  

  <div class="article-content">
    <div class="markdown-body">
      <blockquote>
<p>Reactæ˜¯æµè¡Œçš„javascriptæ¡†æ¶ä¹‹ä¸€ï¼Œåœ¨2019å¹´åŠä»¥åå°†ä¼šæ›´åŠ æµè¡Œã€‚Reactäº2013å¹´é¦–æ¬¡å‘å¸ƒï¼Œå¤šå¹´æ¥å¹¿å—æ¬¢è¿ã€‚å®ƒæ˜¯ä¸€ä¸ªå£°æ˜æ€§çš„ã€åŸºäºç»„ä»¶çš„ã€ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„é«˜æ•ˆjavascriptåº“ã€‚</p>
</blockquote>
<h2 id="1ã€ä»€ä¹ˆæ˜¯å£°æ˜å¼ç¼–ç¨‹"><a href="#1ã€ä»€ä¹ˆæ˜¯å£°æ˜å¼ç¼–ç¨‹" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯å£°æ˜å¼ç¼–ç¨‹"></a>1ã€ä»€ä¹ˆæ˜¯å£°æ˜å¼ç¼–ç¨‹</h2><p>å£°æ˜å¼ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹è§„èŒƒï¼Œå…³æ³¨çš„æ˜¯ä½ è¦åšä»€ä¹ˆè€Œä¸æ˜¯æ€ä¹ˆåšã€‚å®ƒè¡¨è¾¾é€»è¾‘è€Œä¸æ˜¾å¼åœ°å®šä¹‰æ­¥éª¤ã€‚å£°æ˜å¼ç¼–ç¨‹çš„ä¾‹å­æœ‰HTMLã€SQLç­‰ã€‚</p>
<h2 id="2ã€å£°æ˜å¼ç¼–ç¨‹-vs-å‘½ä»¤å¼ç¼–ç¨‹"><a href="#2ã€å£°æ˜å¼ç¼–ç¨‹-vs-å‘½ä»¤å¼ç¼–ç¨‹" class="headerlink" title="2ã€å£°æ˜å¼ç¼–ç¨‹ vs å‘½ä»¤å¼ç¼–ç¨‹"></a>2ã€å£°æ˜å¼ç¼–ç¨‹ vs å‘½ä»¤å¼ç¼–ç¨‹</h2><p>å£°æ˜å¼ç¼–ç¨‹æè¿°äº†æˆ‘ä»¬åº”è¯¥åšä»€ä¹ˆï¼Œè€Œå‘½ä»¤å¼ç¼–ç¨‹æè¿°çš„æ˜¯æˆ‘ä»¬å¦‚ä½•åšã€‚åœ¨å£°æ˜å¼ç¼–ç¨‹ä¸­é€šè¿‡ç¼–è¯‘å™¨æ¥å†³å®šå¦‚ä½•åšï¼Œè€Œå‘½ä»¤å¼ç¼–ç¨‹ä¸­ä»£ç æœ¬èº«å°±æè¿°äº†å®ƒåœ¨åšä»€ä¹ˆã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"><span class="comment">// å£°æ˜å¼</span></span><br><span class="line"><span class="keyword">const</span> doubleWithDec = numbers.map(<span class="function"><span class="params">number</span> =&gt;</span> number * <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(doubleWithDec);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘½ä»¤å¼</span></span><br><span class="line"><span class="keyword">const</span> doubleWithImp = [];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;numbers.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> numberdouble = numbers[i] * <span class="number">2</span>;</span><br><span class="line">    doubleWithImp.push(numberdouble)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(doubleWithImp)</span><br></pre></td></tr></table></figure>
<h2 id="3ã€å‡½æ•°å¼ç¼–ç¨‹"><a href="#3ã€å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="3ã€å‡½æ•°å¼ç¼–ç¨‹"></a>3ã€å‡½æ•°å¼ç¼–ç¨‹</h2><p>å‡½æ•°å¼ç¼–ç¨‹æ˜¯å£°æ˜å¼ç¼–ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚javascriptä¸­çš„å‡½æ•°æ˜¯ç¬¬ä¸€ç±»å…¬æ°‘ï¼Œè¿™æ„å‘³ç€å‡½æ•°æ˜¯æ•°æ®ï¼Œä½ å¯ä»¥åƒä¿å­˜å˜é‡ä¸€æ ·åœ¨åº”ç”¨ç¨‹åºä¸­ä¿å­˜ã€æ£€ç´¢å’Œä¼ é€’è¿™äº›å‡½æ•°ã€‚</p>
<p>å‡½æ•°å¼ç¼–ç¨‹æœ‰äº›æ ¸å¿ƒçš„æ¦‚å¿µï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä¸å¯å˜æ€§(Immutability)</span><br><span class="line">çº¯å‡½æ•°(Pure Functions)</span><br><span class="line">æ•°æ®è½¬æ¢(Data Transformations)</span><br><span class="line">é«˜é˜¶å‡½æ•° (Higher-Order Functions)</span><br><span class="line">é€’å½’</span><br><span class="line">ç»„åˆ</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸å¯å˜æ€§(Immutability)</li>
</ul>
<p>åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œä½ æ— æ³•æ›´æ”¹æ•°æ®ï¼Œä¹Ÿä¸èƒ½æ›´æ”¹ã€‚ å¦‚æœè¦æ”¹å˜æˆ–æ›´æ”¹æ•°æ®ï¼Œåˆ™å¿…é¡»å¤åˆ¶æ•°æ®å‰¯æœ¬æ¥æ›´æ”¹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> student = &#123;</span><br><span class="line">    firstName: <span class="string">"testing"</span>,</span><br><span class="line">    lastName: <span class="string">"testing"</span>,</span><br><span class="line">    marks: <span class="number">500</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeName</span>(<span class="params">student</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// student.firstName = "testing11" //should not do it</span></span><br><span class="line">    <span class="keyword">let</span> copiedStudent = <span class="built_in">Object</span>.assign(&#123;&#125;, student);</span><br><span class="line">    copiedStudent.firstName = <span class="string">"testing11"</span>;</span><br><span class="line">    <span class="keyword">return</span> copiedStudent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(changeName(student));</span><br></pre></td></tr></table></figure>
<ul>
<li>çº¯å‡½æ•°</li>
</ul>
<p>çº¯å‡½æ•°æ˜¯å§‹ç»ˆæ¥å—ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°å¹¶è®¡ç®—å‚æ•°å¹¶è¿”å›æ•°æ®æˆ–å‡½æ•°çš„å‡½æ•°.(ä¸æ”¹å˜ä¼ å…¥çš„å€¼ï¼Œè€Œä¸”æ€»æ˜¯å¯¹ç›¸åŒçš„è¾“å…¥è¿”å›ç›¸åŒçš„è¾“å‡º)ã€‚åä¹‹è¢«ç§°ä¸ºæ˜¯éçº¯å‡½æ•°ã€‚</p>
<p>æˆ‘æƒ³ä½¿ç”¨ appendAddress çš„å‡½æ•°å‘studentå¯¹è±¡æ·»åŠ ä¸€ä¸ªåœ°å€ã€‚ å¦‚æœä½¿ç”¨éçº¯å‡½æ•°ï¼Œå®ƒæ²¡æœ‰å‚æ•°ï¼Œç›´æ¥æ›´æ”¹ student å¯¹è±¡æ¥æ›´æ”¹å…¨å±€çŠ¶æ€ã€‚</p>
<p>ä½¿ç”¨çº¯å‡½æ•°ï¼Œå®ƒæ¥å—å‚æ•°ï¼ŒåŸºäºå‚æ•°è®¡ç®—ï¼Œè¿”å›ä¸€ä¸ªæ–°å¯¹è±¡è€Œä¸ä¿®æ”¹å‚æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> student = &#123;</span><br><span class="line">    firstName: <span class="string">"testing"</span>,</span><br><span class="line">    lastName: <span class="string">"testing"</span>,</span><br><span class="line">    marks: <span class="number">500</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éçº¯å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">appendAddress</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    student.address = &#123;<span class="attr">streetNumber</span>:<span class="string">"0000"</span>, <span class="attr">streetName</span>: <span class="string">"first"</span>, <span class="attr">city</span>:<span class="string">"somecity"</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(appendAddress());</span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¯å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">appendAddress</span>(<span class="params">student</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> copystudent = <span class="built_in">Object</span>.assign(&#123;&#125;, student);</span><br><span class="line">    copystudent.address = &#123;<span class="attr">streetNumber</span>:<span class="string">"0000"</span>, <span class="attr">streetName</span>: <span class="string">"first"</span>, <span class="attr">city</span>:<span class="string">"somecity"</span>&#125;;</span><br><span class="line">    <span class="keyword">return</span> copystudent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(appendAddress(student));</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(student);</span><br></pre></td></tr></table></figure>
<ul>
<li>é«˜é˜¶å‡½æ•°</li>
</ul>
<p>é«˜é˜¶å‡½æ•°æ˜¯å°†å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è¿”å›å‡½æ•°çš„å‡½æ•°ï¼Œæˆ–è€…æœ‰æ—¶å®ƒä»¬éƒ½æœ‰ã€‚ è¿™äº›é«˜é˜¶å‡½æ•°å¯ä»¥æ“çºµå…¶ä»–å‡½æ•°ã€‚</p>
<p>Array.mapï¼ŒArray.filterå’ŒArray.reduceæ˜¯é«˜é˜¶å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬å°†å‡½æ•°ä½œä¸ºå‚æ•°ã€‚</p>
<ul>
<li>é€’å½’</li>
</ul>
<p>é€’å½’æ˜¯ä¸€ç§å‡½æ•°åœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶ä¹‹å‰è°ƒç”¨è‡ªèº«çš„æŠ€æœ¯ã€‚åªè¦å¯èƒ½ï¼Œæœ€å¥½ä½¿ç”¨é€’å½’è€Œä¸æ˜¯å¾ªç¯.</p>
<ul>
<li>ç»„åˆ</li>
</ul>
<p>åœ¨Reactä¸­ï¼Œæˆ‘ä»¬å°†åŠŸèƒ½åˆ’åˆ†ä¸ºå°å‹å¯é‡ç”¨çš„çº¯å‡½æ•°ï¼Œæˆ‘ä»¬å¿…é¡»å°†æ‰€æœ‰è¿™äº›å¯é‡ç”¨çš„å‡½æ•°æ”¾åœ¨ä¸€èµ·ï¼Œæœ€ç»ˆä½¿å…¶æˆä¸ºäº§å“ã€‚ å°†æ‰€æœ‰è¾ƒå°çš„å‡½æ•°ç»„åˆæˆæ›´å¤§çš„å‡½æ•°ï¼Œæœ€ç»ˆï¼Œå¾—åˆ°ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œè¿™ç§°ä¸ºç»„åˆã€‚</p>
<p>å®ç°ç»„åˆæœ‰è®¸å¤šä¸åŒæ–¹æ³•ã€‚ æˆ‘ä»¬ä»Javascriptä¸­äº†è§£åˆ°çš„ä¸€ç§å¸¸è§æ–¹æ³•æ˜¯é“¾æ¥ã€‚ é“¾æ¥æ˜¯ä¸€ç§ä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•è°ƒç”¨å‰ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼çš„å‡½æ•°çš„æ–¹æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">"Bhargav Bachina"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> output = name.split(<span class="string">" "</span>)</span><br><span class="line">    .filter(<span class="function"><span class="params">name</span> =&gt;</span> name.length &gt; <span class="number">5</span>)</span><br><span class="line">    .map(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">    val = val.toUpperCase();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Name:::::"</span>+val);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Count::::"</span>+val.length);</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(output);</span><br></pre></td></tr></table></figure>
<p>åœ¨Reactä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸åŒäºé“¾æ¥çš„æ–¹æ³•ï¼Œå› ä¸ºå¦‚æœæœ‰30ä¸ªè¿™æ ·çš„å‡½æ•°ï¼Œå°±å¾ˆéš¾è¿›è¡Œé“¾æ¥ã€‚è¿™é‡Œçš„ç›®çš„æ˜¯å°†æ‰€æœ‰æ›´ç®€å•çš„å‡½æ•°ç»„åˆèµ·æ¥ç”Ÿæˆä¸€ä¸ªæ›´é«˜é˜¶çš„å‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = compose(</span><br><span class="line">    splitmyName,</span><br><span class="line">    countEachName,</span><br><span class="line">    comvertUpperCase,</span><br><span class="line">    returnName</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br></pre></td></tr></table></figure>
<h2 id="4ã€Reactæ˜¯ä»€ä¹ˆ"><a href="#4ã€Reactæ˜¯ä»€ä¹ˆ" class="headerlink" title="4ã€Reactæ˜¯ä»€ä¹ˆ"></a>4ã€Reactæ˜¯ä»€ä¹ˆ</h2><p>Reactæ˜¯ä¸€ä¸ªç®€å•çš„javascript UIåº“ï¼Œç”¨äºæ„å»ºé«˜æ•ˆã€å¿«é€Ÿçš„ç”¨æˆ·ç•Œé¢ã€‚å®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§åº“ï¼Œå› æ­¤å¾ˆå—æ¬¢è¿ã€‚<br>å®ƒéµå¾ªç»„ä»¶è®¾è®¡æ¨¡å¼ã€å£°æ˜å¼ç¼–ç¨‹èŒƒå¼å’Œå‡½æ•°å¼ç¼–ç¨‹æ¦‚å¿µï¼Œä»¥ä½¿å‰ç«¯åº”ç”¨ç¨‹åºæ›´é«˜æ•ˆã€‚å®ƒä½¿ç”¨è™šæ‹ŸDOMæ¥æœ‰æ•ˆåœ°æ“ä½œDOMã€‚å®ƒéµå¾ªä»é«˜é˜¶ç»„ä»¶åˆ°ä½é˜¶ç»„ä»¶çš„å•å‘æ•°æ®æµã€‚</p>
<p>å°½ç®¡å®ƒåªæ˜¯ MVCï¼ˆæ¨¡å‹ - è§†å›¾ - æ§åˆ¶å™¨ï¼‰ä¸­â€œè§†å›¾â€çš„åº“ï¼Œä½†å®ƒå¯¹ Angularï¼ŒMeteorï¼ŒVue ç­‰å…¨é¢çš„æ¡†æ¶ä¹Ÿæ„æˆäº†å¼ºåŠ›çš„æŒ‘æˆ˜ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/3/25/169b42c3abdbcbf2?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt></p>
<h2 id="5ã€React-ä¸-Angular-æœ‰ä½•ä¸åŒï¼Ÿ"><a href="#5ã€React-ä¸-Angular-æœ‰ä½•ä¸åŒï¼Ÿ" class="headerlink" title="5ã€React ä¸ Angular æœ‰ä½•ä¸åŒï¼Ÿ"></a>5ã€React ä¸ Angular æœ‰ä½•ä¸åŒï¼Ÿ</h2><p>Angularæ˜¯ä¸€ä¸ªæˆç†Ÿçš„MVCæ¡†æ¶ï¼Œå¸¦æœ‰å¾ˆå¤šç‰¹å®šçš„ç‰¹æ€§ï¼Œæ¯”å¦‚æœåŠ¡ã€æŒ‡ä»¤ã€æ¨¡æ¿ã€æ¨¡å—ã€è§£æå™¨ç­‰ç­‰ã€‚Reactæ˜¯ä¸€ä¸ªéå¸¸è½»é‡çº§çš„åº“ï¼Œå®ƒåªå…³æ³¨MVCçš„è§†å›¾éƒ¨åˆ†ã€‚</p>
<h2 id="6ã€ä»€ä¹ˆæ˜¯JSX"><a href="#6ã€ä»€ä¹ˆæ˜¯JSX" class="headerlink" title="6ã€ä»€ä¹ˆæ˜¯JSX"></a>6ã€ä»€ä¹ˆæ˜¯JSX</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const element = &lt;h1&gt;Hello, world!&lt;/h1&gt;;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§è¯­æ³•æ—¢ä¸æ˜¯HTMLä¹Ÿä¸æ˜¯å­—ç¬¦ä¸²ï¼Œæ˜¯Reactç”¨æ¥æè¿°UIç•Œé¢å’Œæ ·å¼çš„ä¸€ç§å¿ƒå¾—è¯­æ³•ï¼Œæ˜¯ä¸€ç§æ–°çš„é™æ€ç¼–è¯‘è¯­è¨€ã€‚JSXæœ€ç»ˆä¼šè¢«ç¼–è¯‘ä¸ºåˆæ³•çš„jsè¯­å¥è°ƒç”¨ï¼Œé‡åˆ°<code>{}</code>å°±ä»¥jsè¯­æ³•æ¥è§£æï¼Œé‡åˆ°<code>&lt;&gt;</code>å°±ä½¿ç”¨HTMLè¯­æ³•æ¥è§£æã€‚Reacté‡‡ç”¨babelæ¥ç¼–è¯‘JSXã€‚</p>
<h2 id="7ã€åµŒå…¥è¡¨è¾¾å¼"><a href="#7ã€åµŒå…¥è¡¨è¾¾å¼" class="headerlink" title="7ã€åµŒå…¥è¡¨è¾¾å¼"></a>7ã€åµŒå…¥è¡¨è¾¾å¼</h2><p>JSXä¸­ï¼Œå¯ä»¥ä½¿ç”¨èŠ±æ‹¬å·{}åµŒå…¥ä»»æ„çš„JavaScriptåˆæ³•è¡¨è¾¾å¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">    firstName: <span class="string">'Zhang'</span>,</span><br><span class="line">    lastName : <span class="string">'Busong'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> elem = (</span><br><span class="line">    &lt;h1&gt;Hello, &#123;formatName(user)&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp">/</span>*</span><br><span class="line">è¿™é‡Œçš„()ï¼Œå®é™…ä¸Šæ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯Reactæ¨èåŠ å…¥()ï¼Œè¿™æ ·å­å°±ä¼šè¢«è§†ä¸ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè€Œä¸ä¼šå¯¼è‡´</span><br><span class="line">è‡ªåŠ¨æ’å…¥åˆ†å·çš„é—®é¢˜</span><br><span class="line">*<span class="regexp">/</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render(</span></span><br><span class="line"><span class="regexp">    element,</span></span><br><span class="line"><span class="regexp">    document.getElementById('app')</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure>
<h2 id="8ã€JSXæœ¬èº«æ˜¯ä¸€ç§è¡¨è¾¾å¼"><a href="#8ã€JSXæœ¬èº«æ˜¯ä¸€ç§è¡¨è¾¾å¼" class="headerlink" title="8ã€JSXæœ¬èº«æ˜¯ä¸€ç§è¡¨è¾¾å¼"></a>8ã€JSXæœ¬èº«æ˜¯ä¸€ç§è¡¨è¾¾å¼</h2><p>JSXæœ¬èº«ä¹Ÿæ˜¯ä¸€ç§è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åƒå…¶ä»–è¡¨è¾¾å¼ä¸€æ ·ï¼Œç”¨äºç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ã€ä½œä¸ºå‡½æ•°å®å‚ã€ä½œä¸ºå‡½æ•°è¿”å›å€¼ï¼Œç­‰ç­‰ã€‚å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getGreeting</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (user) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;formatName(user)&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, Guest!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>åœ¨JSXä¸­ï¼Œå£°æ˜å±æ€§æ—¶ä¸è¦ä½¿ç”¨å¼•å·ï¼Œå¦‚æœå£°æ˜å±æ€§çš„æ—¶å€™ä½¿ç”¨å¼•å·ï¼Œé‚£ä¹ˆå°†è¢«ä½œä¸ºå­—ç¬¦ä¸²è§£æï¼Œè€Œä¸ä¼šè¢«ä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼è§£æ</p>
</li>
<li><p>åœ¨JSXä¸­ï¼Œæœ‰äº›å±æ€§åç§°éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚å¦‚classåº”è¯¥ç”¨classNameä»£æ›¿ï¼Œtabindexåˆ™ç”¨tabIndexä»£æ›¿ã€‚è¿™æ˜¯å› ä¸ºå…³é”®å­—å†²çªäº†ã€‚</p>
</li>
<li><p>JSXæœ¬èº«å·²ç»åšäº†é˜²æ³¨å…¥å¤„ç†ï¼Œå¯¹äºé‚£äº›ä¸æ˜¯æ˜ç¡®ç¼–å†™çš„HTMLä»£ç ï¼Œæ˜¯ä¸ä¼šè¢«è§£æä¸ºHTML DOMçš„ï¼ŒReactDOMä¼šå°†ä»–ä»¬ä¸€å¾‹è§†ä¸ºå­—ç¬¦ä¸²ï¼Œåœ¨æ¸²æŸ“å®Œæˆå‰å°±è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¯ä»¥é˜²æ­¢XSSæ”»å‡»ã€‚</p>
</li>
<li><p>å¦‚æœJSXæ ‡ç­¾æ˜¯é—­åˆçš„ï¼Œé‚£ä¹ˆç»“å°¾éœ€è¦ç”¨/&gt;ï¼Œå¦å¤–ï¼ŒJSXæ ‡ç­¾æ˜¯å¯ä»¥äº’ç›¸åµŒå¥—çš„ï¼Œè¿™å’ŒHTMLé‡Œæ˜¯ä¸€æ ·çš„</p>
</li>
</ul>
<h2 id="9ã€JSXæœ¬è´¨"><a href="#9ã€JSXæœ¬è´¨" class="headerlink" title="9ã€JSXæœ¬è´¨"></a>9ã€JSXæœ¬è´¨</h2><p>æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•ç”¨ JavaScript å¯¹è±¡æ¥è¡¨ç°ä¸€ä¸ª DOM å…ƒç´ çš„ç»“æ„ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">'box'</span> id=<span class="string">'content'</span>&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">'title'</span>&gt;Hello&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;button&gt;Click&lt;/</span>button&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ¯ä¸ª DOM å…ƒç´ çš„ç»“æ„éƒ½å¯ä»¥ç”¨ JavaScript çš„å¯¹è±¡æ¥è¡¨ç¤ºã€‚ä½ ä¼šå‘ç°ä¸€ä¸ª DOM å…ƒç´ åŒ…å«çš„ä¿¡æ¯å…¶å®åªæœ‰ä¸‰ä¸ªï¼šæ ‡ç­¾åï¼Œå±æ€§ï¼Œå­å…ƒç´ ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  tag: <span class="string">'div'</span>,</span><br><span class="line">  attrs: &#123; <span class="attr">className</span>: <span class="string">'box'</span>, <span class="attr">id</span>: <span class="string">'content'</span>&#125;,</span><br><span class="line">  children: [</span><br><span class="line">    &#123;</span><br><span class="line">      tag: <span class="string">'div'</span>,</span><br><span class="line">      arrts: &#123; <span class="attr">className</span>: <span class="string">'title'</span> &#125;,</span><br><span class="line">      children: [<span class="string">'Hello'</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      tag: <span class="string">'button'</span>,</span><br><span class="line">      attrs: <span class="literal">null</span>,</span><br><span class="line">      children: [<span class="string">'Click'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½ ä¼šå‘ç°ï¼ŒHTML çš„ä¿¡æ¯å’Œ JavaScript æ‰€åŒ…å«çš„ç»“æ„å’Œä¿¡æ¯å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ JavaScript å¯¹è±¡æ¥æè¿°æ‰€æœ‰èƒ½ç”¨ HTML è¡¨ç¤ºçš„ UI ä¿¡æ¯ã€‚ä½†æ˜¯ç”¨ JavaScript å†™èµ·æ¥å¤ªé•¿äº†ï¼Œç»“æ„çœ‹èµ·æ¥åˆä¸æ¸…æ™°ï¼Œç”¨ HTML çš„æ–¹å¼å†™èµ·æ¥å°±æ–¹ä¾¿å¾ˆå¤šäº†ã€‚</p>
<p>äºæ˜¯ React.js å°±æŠŠ JavaScript çš„è¯­æ³•æ‰©å±•äº†ä¸€ä¸‹ï¼Œè®© JavaScript è¯­è¨€èƒ½å¤Ÿæ”¯æŒè¿™ç§ç›´æ¥åœ¨ JavaScript ä»£ç é‡Œé¢ç¼–å†™ç±»ä¼¼ HTML æ ‡ç­¾ç»“æ„çš„è¯­æ³•ï¼Œè¿™æ ·å†™èµ·æ¥å°±æ–¹ä¾¿å¾ˆå¤šäº†ã€‚ç¼–è¯‘çš„è¿‡ç¨‹ä¼šæŠŠç±»ä¼¼ HTML çš„ JSX ç»“æ„è½¬æ¢æˆ JavaScript çš„å¯¹è±¡ç»“æ„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Header</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1 className=<span class="string">'title'</span>&gt;React å°ä¹¦&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Header /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ç»è¿‡ç¼–è¯‘ä»¥åä¼šå˜æˆï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Header</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">     React.createElement(</span><br><span class="line">        <span class="string">"div"</span>,</span><br><span class="line">        <span class="literal">null</span>,</span><br><span class="line">        React.createElement(</span><br><span class="line">          <span class="string">"h1"</span>,</span><br><span class="line">          &#123; <span class="attr">className</span>: <span class="string">'title'</span> &#125;,</span><br><span class="line">          <span class="string">"React å°ä¹¦"</span></span><br><span class="line">        )</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  React.createElement(Header, <span class="literal">null</span>), </span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>React.createElement ä¼šæ„å»ºä¸€ä¸ª JavaScript å¯¹è±¡æ¥æè¿°ä½  HTML ç»“æ„çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ ‡ç­¾åã€å±æ€§ã€è¿˜æœ‰å­å…ƒç´ ç­‰ã€‚è¿™æ ·çš„ä»£ç å°±æ˜¯åˆæ³•çš„ JavaScript ä»£ç äº†ã€‚æ‰€ä»¥ä½¿ç”¨ React å’Œ JSX çš„æ—¶å€™ä¸€å®šè¦ç»è¿‡ç¼–è¯‘çš„è¿‡ç¨‹ã€‚</p>
<p>æ‰€è°“çš„ JSX å…¶å®å°±æ˜¯ JavaScript å¯¹è±¡ã€‚æ¯å½“åœ¨ JavaScript ä»£ç ä¸­çœ‹åˆ°è¿™ç§ JSX ç»“æ„çš„æ—¶å€™ï¼Œè„‘å­é‡Œé¢å°±å¯ä»¥è‡ªåŠ¨åšè½¬åŒ–ï¼Œè¿™æ ·å¯¹ä½ ç†è§£ React.js çš„ç»„ä»¶å†™æ³•å¾ˆæœ‰å¥½å¤„ã€‚</p>
<p>æœ‰äº†è¿™ä¸ªè¡¨ç¤º HTML ç»“æ„å’Œä¿¡æ¯çš„å¯¹è±¡ä»¥åï¼Œå°±å¯ä»¥æ‹¿å»æ„é€ çœŸæ­£çš„ DOM å…ƒç´ ï¼Œç„¶åæŠŠè¿™ä¸ª DOM å…ƒç´ å¡åˆ°é¡µé¢ä¸Šã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æœ€åä¸€æ®µä»£ç ä¸­ ReactDOM.render æ‰€å¹²çš„äº‹æƒ…ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Header /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>ReactDOM.render åŠŸèƒ½å°±æ˜¯æŠŠç»„ä»¶æ¸²æŸ“å¹¶ä¸”æ„é€  DOM æ ‘ï¼Œç„¶åæ’å…¥åˆ°é¡µé¢ä¸ŠæŸä¸ªç‰¹å®šçš„å…ƒç´ ä¸Šï¼ˆåœ¨è¿™é‡Œæ˜¯ id ä¸º root çš„ div å…ƒç´ ï¼‰ã€‚</strong></p>
<p><img src="http://huzidaha.github.io/static/assets/img/posts/44B5EC06-EAEB-4BA2-B3DC-325703E4BA45.png" alt></p>
<p><strong>æ€»ç»“</strong></p>
<p>JSXé€šè¿‡babelç¼–è¯‘ï¼Œè€Œbabelå®é™…ä¸ŠæŠŠJSXç¼–è¯‘ç»™<code>React.createElement()</code>è°ƒç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = (</span><br><span class="line">    &lt;h1 className=<span class="string">"greeting"</span>&gt;</span><br><span class="line">        Hello, world!</span><br><span class="line">    &lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const elem = React.createElement(</span></span><br><span class="line"><span class="regexp">    'h1',</span></span><br><span class="line"><span class="regexp">    &#123;className: 'greeting'&#125;,</span></span><br><span class="line"><span class="regexp">    'Hello, world!'</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆReact.createElementè¿™ä¸ªæ–¹æ³•ä¼šå¾—åˆ°ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>React.createElement()æ–¹æ³•ä¼šé¦–å…ˆè¿›è¡Œä¸€äº›é¿å…BUGçš„æ£€æŸ¥ï¼Œç„¶åè¿”å›ç±»ä¼¼ä»¥ä¸‹ä¾‹å­çš„å¯¹è±¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = &#123;</span><br><span class="line">    type: <span class="string">'h1'</span>,</span><br><span class="line">    props: &#123;</span><br><span class="line">        className: <span class="string">'greeting'</span>,</span><br><span class="line">        children: <span class="string">'Hello, world'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·çš„å¯¹è±¡ï¼Œåˆ™ç§°ä¸ºReactå…ƒç´ ï¼Œä»£è¡¨æ‰€æœ‰å‘ˆç°åœ¨å±å¹•ä¸Šçš„ä¸œè¥¿ã€‚Reactæ­£æ˜¯é€šè¿‡è¯»å–è¿™äº›å¯¹è±¡æ¥æ„å»ºDOMï¼Œå¹¶ä¸”ä¿æŒæ•°æ®å’ŒUIåŒæ­¥çš„.<br>åŒæ—¶å½“æ•°æ®å‘ç”Ÿå˜åŒ–ä¹‹åï¼ŒReactä¼šé€šè¿‡diffç®—æ³•æ¥æ£€æŸ¥æ–°æ—§å¯¹è±¡çš„ä¸åŒï¼Œä»è€Œç¡®å®šéœ€è¦æ›´æ”¹çš„åœ°æ–¹ï¼Œç„¶åè¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚è¿™æ ·å¯ä»¥å°½é‡å°‘çš„å‡å°‘æµè§ˆå™¨é‡æ’ï¼Œæå¤§åœ°ä¼˜åŒ–æ€§èƒ½ã€‚</p>
<h2 id="10ã€å…ƒç´ "><a href="#10ã€å…ƒç´ " class="headerlink" title="10ã€å…ƒç´ "></a>10ã€å…ƒç´ </h2><p>å…ƒç´ æ˜¯æ„æˆReactåº”ç”¨çš„æœ€å°å•ä½ã€‚æ¯”å¦‚ï¼š <code>const element = &lt;h1&gt;Hello, world&lt;/h1&gt;;</code>;React DOM å¯ä»¥ç¡®ä¿ æµè§ˆå™¨ DOM çš„æ•°æ®å†…å®¹ä¸ React å…ƒç´ ä¿æŒä¸€è‡´ã€‚Reactå…ƒç´ ä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ç»„ä»¶ï¼Œ<code>const element = &lt;Welcome name=&quot;Tom&quot; /&gt;</code></p>
<p>å’ŒDOMå…ƒç´ ä¸åŒçš„æ˜¯ï¼ŒReactå…ƒç´ æ˜¯çº¯å¯¹è±¡ï¼Œåˆ›å»ºçš„ä»£ä»·ä½ã€‚å¹¶ä¸”Reactä¼šè¿›è¡Œä¼˜åŒ–å¤„ç†ï¼ŒåªæŠŠæœ‰å¿…è¦çš„å˜åŒ–æ›´æ–°åˆ°DOMä¸Šã€‚æ­¤å¤–ï¼Œå…ƒç´ å’Œç»„ä»¶çš„æ¦‚å¿µï¼Œæ˜¯ä¸ä¸€æ ·çš„ï¼Œ<strong>ç»„ä»¶æ˜¯ç”±å…ƒç´ ç»„æˆçš„</strong>ã€‚</p>
<p><strong>å°†å…ƒç´ æ¸²æŸ“åˆ° DOM ä¸­</strong></p>
<p>é¦–å…ˆæˆ‘ä»¬åœ¨ä¸€ä¸ª HTML é¡µé¢ä¸­æ·»åŠ ä¸€ä¸ª id=â€exampleâ€ çš„ <div>:</div></p>
<p>åœ¨æ­¤ <code>div</code> ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å°†ç”± <code>React DOM</code> æ¥ç®¡ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶ç§°ä¸º â€œæ ¹â€ <code>DOM</code> èŠ‚ç‚¹ã€‚</p>
<p>æˆ‘ä»¬ç”¨ <code>React</code> å¼€å‘åº”ç”¨æ—¶ä¸€èˆ¬åªä¼šå®šä¹‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚ä½†å¦‚æœä½ æ˜¯åœ¨ä¸€ä¸ªå·²æœ‰çš„é¡¹ç›®å½“ä¸­å¼•å…¥ React çš„è¯ï¼Œä½ å¯èƒ½ä¼šéœ€è¦åœ¨ä¸åŒçš„éƒ¨åˆ†å•ç‹¬å®šä¹‰ React æ ¹èŠ‚ç‚¹ã€‚</p>
<p>è¦å°†Reactå…ƒç´ æ¸²æŸ“åˆ°æ ¹DOMèŠ‚ç‚¹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æŠŠå®ƒä»¬éƒ½ä¼ é€’ç»™ <code>ReactDOM.render()</code> çš„æ–¹æ³•æ¥å°†å…¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const element = &lt;h1&gt;Hello, world!&lt;/h1&gt;;</span><br><span class="line">ReactDOM.render(</span><br><span class="line">    element,</span><br><span class="line">    document.getElementById(&apos;example&apos;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><strong>React å…ƒç´ éƒ½æ˜¯ä¸å¯å˜çš„ã€‚å½“å…ƒç´ è¢«åˆ›å»ºä¹‹åï¼Œä½ æ˜¯æ— æ³•æ”¹å˜å…¶å†…å®¹æˆ–å±æ€§çš„ã€‚</strong></p>
<p>ç›®å‰æ›´æ–°ç•Œé¢çš„å”¯ä¸€åŠæ³•æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å…ƒç´ ï¼Œç„¶åå°†å®ƒä¼ å…¥ ReactDOM.render() æ–¹æ³•,æ¯”å¦‚ä½¿ç”¨å®šæ—¶å™¨æ¥æ¨¡æ‹Ÿã€‚  </p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¤§å¤šæ•°Reactåº”ç”¨åªä¼šè°ƒç”¨ä¸€æ¬¡ReactDOM.render()ï¼Œæ‰€ä»¥æ›´å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨æœ‰çŠ¶æ€ç»„ä»¶ã€‚</p>
<h2 id="11ã€ç»„ä»¶çš„åˆ›å»ºæ–¹å¼"><a href="#11ã€ç»„ä»¶çš„åˆ›å»ºæ–¹å¼" class="headerlink" title="11ã€ç»„ä»¶çš„åˆ›å»ºæ–¹å¼"></a>11ã€ç»„ä»¶çš„åˆ›å»ºæ–¹å¼</h2><p>ç»„ä»¶å…¶å®å°±æ˜¯å°†æˆ‘ä»¬çš„UIåˆ’åˆ†ä¸ºç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„éƒ¨åˆ†ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½ä¸“æ³¨äºæ„å»ºæ¯ä¸€ä¸ªç‹¬ç«‹çš„å•å…ƒã€‚<br>ä»æ¦‚å¿µä¸Šè¿˜è¯´ï¼Œç»„ä»¶å°±åƒæ˜¯å‡½æ•°ï¼Œæ¥å—æˆ‘ä»¬ä¼ å…¥çš„å±æ€§ï¼ˆpropsï¼‰åŒæ—¶å®ƒåˆæœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œç„¶åè¿”å›ä¸€ä¸ªReactå…ƒç´ ã€‚å¹¿ä¹‰ä¸Šè®²æˆ‘ä»¬çš„reactç»„ä»¶ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼špropsã€stateã€ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>å¸¸ä½¿ç”¨çš„ç»„ä»¶åˆ›å»ºæ–¹å¼æœ‰ä¸¤ç§ï¼š<br><strong>ï¼ˆ1ï¼‰ES6 class</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    render () &#123;</span><br><span class="line">        <span class="keyword">return</span> &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;h1&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ï¼ˆ2ï¼‰å‡½æ•°å¼ç»„ä»¶/æ— çŠ¶æ€ç»„ä»¶</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span> (<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸€ç§åˆ›å»ºç»„ä»¶çš„æ–¹æ³•<code>React.createClass({})</code>,ä½†æ˜¯ç›®å‰å¹¶ä¸æ˜¯æ¨èå†™æ³•äº†ï½</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">React.createClass(&#123;</span><br><span class="line">  render () &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;&lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="12ã€Reactçš„ç»„ä»¶é‡‡ç”¨Has-Açš„å…³ç³»ï¼ˆç»„åˆï¼‰"><a href="#12ã€Reactçš„ç»„ä»¶é‡‡ç”¨Has-Açš„å…³ç³»ï¼ˆç»„åˆï¼‰" class="headerlink" title="12ã€Reactçš„ç»„ä»¶é‡‡ç”¨Has-Açš„å…³ç³»ï¼ˆç»„åˆï¼‰"></a>12ã€Reactçš„ç»„ä»¶é‡‡ç”¨Has-Açš„å…³ç³»ï¼ˆç»„åˆï¼‰</h2><p>å­¦ä¹ è¿‡javaï¼Œæˆ‘ä»¬è‚¯å®šç†ŸçŸ¥ç»§æ‰¿å’Œç»„åˆã€‚ç»§æ‰¿ä¸»è¦ä¸ºäº†å®ç°ä»£ç å¤ç”¨ï¼Œæ˜¯ç™½ç›’å¼çš„ä»£ç å¤ç”¨ï¼Œæ˜¯IS-Açš„å…³ç³»ã€‚è€Œç»„åˆåˆ™æ˜¯é€šè¿‡å¯¹ç°æœ‰å¯¹è±¡çš„ç»„åˆæ¥å®ç°å…·æœ‰æ›´å¤æ‚åŠŸèƒ½çš„å¯¹è±¡ï¼Œæ˜¯HASâ€”Açš„å…³ç³»ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è½®èƒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tire</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"è½®èƒè½¬åŠ¨..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è½¦ç¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Light</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">light</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ç¯äº®..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * äº¤é€šå·¥å…·</span></span><br><span class="line"><span class="comment"> * ç»„åˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Tire tire;</span><br><span class="line">    <span class="keyword">private</span> Light light;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Vehicle</span><span class="params">(Tire tire,Light light)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.tire = tire;</span><br><span class="line">        <span class="keyword">this</span>.light = light;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        light.light();</span><br><span class="line">        tire.run();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Tire tire = <span class="keyword">new</span> Tire();</span><br><span class="line">        Light light = <span class="keyword">new</span> Light();</span><br><span class="line">        Vehicle vehicle = <span class="keyword">new</span> Vehicle(tire,light);</span><br><span class="line">        vehicle.operation();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Reactçš„ç»„ä»¶åŒ–é‡‡ç”¨çš„å°±æ˜¯ç»„åˆçš„æ–¹å¼æ¥ä½¿ç”¨ä¸åŒåŠŸèƒ½çš„ç»„ä»¶å®Œæˆæ›´ä¸ºå¤æ‚çš„åŠŸèƒ½ã€‚æˆ‘ä»¬åªéœ€å°†æ‹†åˆ†åˆ°åˆç†çš„ç²’åº¦å³å¯ã€‚</strong></p>
<h2 id="13ã€stateå’Œprops"><a href="#13ã€stateå’Œprops" class="headerlink" title="13ã€stateå’Œprops"></a>13ã€stateå’Œprops</h2><h3 id="ã€1ã€‘state"><a href="#ã€1ã€‘state" class="headerlink" title="ã€1ã€‘state"></a>ã€1ã€‘state</h3><p>stateå¯ä»¥æœ‰ä¸¤ç§åˆå§‹åŒ–æ–¹å¼ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">      <span class="keyword">super</span>(props);</span><br><span class="line">      <span class="keyword">this</span>.state = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render () &#123;</span><br><span class="line">        <span class="keyword">return</span> &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;h1&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æˆ–è€…</span><br><span class="line"></span><br><span class="line">class Welcome1 extends React.Component &#123;</span><br><span class="line"></span><br><span class="line">    state = &#123;&#125;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">      super(props);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render () &#123;</span><br><span class="line">        return &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;h1&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸¤ç§æ–¹æ³•ä¸€æ ·çš„æ•ˆæœã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨setState({})æ¥ä¿®æ”¹æˆ‘ä»¬çš„stateï¼Œåªæ˜¯setStateæ˜¯å¼‚æ­¥çš„ã€‚è€Œä¸”å¤šæ¬¡è°ƒç”¨åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå› ä¸ºè¿™æ˜¯Reactçš„ä¸€ç§ä¼˜åŒ–ã€‚</p>
<blockquote>
<p>ç”±äºthis.propså’Œthis.stateå¯èƒ½æ˜¯å¼‚æ­¥æ›´æ–°çš„ï¼Œæ‰€ä»¥ä¸åº”è¯¥ä¾é å®ƒä»¬çš„å€¼æ¥è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ç»™setStateä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚ï¼š</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.setState((prevState, props) =&gt; (&#123;</span><br><span class="line">    counter: prevState.counter + props.increment</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>
<h3 id="ã€2ã€‘props"><a href="#ã€2ã€‘props" class="headerlink" title="ã€2ã€‘props"></a>ã€2ã€‘props</h3><p>propsæ˜¯ç»„ä»¶ä¹‹é—´äº’ç›¸è”ç³»çš„ä¸€ç§æ–¹å¼ã€‚Reactæ˜¯å•å‘æ•°æ®æµï¼Œæœ€ä¸»è¦çš„æµåŠ¨ç®¡é“å°±æ˜¯propsã€‚propsæ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»„ä»¶æ¥æ”¶åˆ°çš„propsæœ€å¥½åˆ›å»ºä¸€ä¸ªå‰¯æœ¬ã€‚å¦‚æœæˆ‘ä»¬è¯•å›¾æ›´æ”¹propsçš„åŸå§‹å€¼ï¼ŒReactä¼šæŠ¥é”™è­¦å‘Šã€‚</p>
<p>æ­¤å¤–propsè¿˜å¯ä»¥è®¾ç½®é»˜è®¤å€¼ï¼Œä»¥åŠè®¾ç½®ç±»å‹æ ¡éªŒã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">Welcome.defaultProps = &#123;</span><br><span class="line">  title: <span class="string">'sss'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>propsçš„ç±»å‹æ ¡éªŒç›®å‰çš„æ¨èæ–¹æ¡ˆæ˜¯ä½¿ç”¨ <code>prop-types</code> npm åŒ…ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸‹è½½ï¼Œç„¶åå³å¯ä½¿ç”¨ã€‚</p>
<p><strong>å­ç»„ä»¶prop</strong></p>
<p>Reactä¸­å†…ç½®äº†ä¸€ä¸ªéå¸¸é‡è¦çš„propï¼Œé‚£å°±æ˜¯<code>children</code>ã€‚å¥¹ä»£è¡¨äº†å­ç»„ä»¶çš„é›†åˆã€‚childrenå¯å¹¶æ²¡æœ‰ä½ æœ€åˆæ¶‰åŠçš„é‚£ä¹ˆç®€å•ï¼Œæˆ‘ä»¬éå¸¸æœ‰å¿…è¦å¥½å¥½ç ”ç©¶ä¸€ä¸‹è¿™ä¸ªä¸œä¸œï½ï½</p>
<p>==============================æˆ‘æ˜¯åä¸½çš„å¼€å§‹åˆ†å‰²çº¿==============================</p>
<blockquote>
<p>æˆ‘ä»¬ä»ä¸€ä¸‹å‡ ç‚¹æ¥è®¤è¯†å®ƒï½ï½</p>
</blockquote>
<ul>
<li><strong>çˆ¶ç»„ä»¶å¯ä»¥å†³å®šå­ç»„ä»¶</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid&gt;</span><br><span class="line">  &lt;Row /&gt;</span><br><span class="line">  &lt;Row /&gt;</span><br><span class="line">  &lt;Row /&gt;</span><br><span class="line">&lt;<span class="regexp">/Grid&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸‰ä¸ª Row ç»„ä»¶éƒ½æˆä¸ºäº† Grid çš„ props.children ã€‚ä½¿ç”¨ä¸€ä¸ªè¡¨è¾¾å¼å®¹å™¨ï¼Œçˆ¶ç»„ä»¶å°±èƒ½å¤Ÿæ¸²æŸ“å®ƒä»¬çš„å­ç»„ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grid</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çˆ¶ç»„ä»¶å¯ä»¥å†³å®šæ˜¯å¦æ¸²æŸ“å­ç»„ä»¶ä»¥åŠæ¸²æŸ“å“ªäº›å­ç»„ä»¶ï¼Œä»¥åŠå¯¹ä»–ä»¬æœ€å“ªäº›æ“ä½œã€‚ï¼ˆæ¯”å¦‚åœ¨Gridä¸­æˆ‘ä»¬å¯ä»¥å†³å®šæ¸²æŸ“å‡ ä¸ªRowï¼‰</p>
<ul>
<li><strong>ä»»ä½•ä¸œè¥¿éƒ½å¯ä»¥æœ€ä¸ºchildå†…å®¹</strong></li>
</ul>
<p>Reactä¸­çš„Childrenä¸ä¸€å®šæ˜¯ç»„ä»¶ï¼Œå®ƒä»¬å¯ä»¥ä½¿ä»»ä½•ä¸œè¥¿ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†ä¸Šé¢çš„æ–‡å­—ä½œä¸ºchildrenä¼ é€’æˆ‘ä»¬çš„ <grid> ç»„ä»¶ã€‚</grid></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid&gt;Hello world!&lt;/Grid&gt;</span><br></pre></td></tr></table></figure>
<p>è€Œä¸”childå†…å®¹å¯ä»¥ä»»æ„ä¹¦å†™ï¼ŒJSXå°†ä¼šè‡ªåŠ¨åˆ é™¤æ¯è¡Œå¼€å¤´å’Œç»“å°¾çš„ç©ºæ ¼ï¼Œä»¥åŠç©ºè¡Œã€‚å®ƒè¿˜ä¼šæŠŠå­—ç¬¦ä¸²ä¸­é—´çš„ç©ºç™½è¡Œå‹ç¼©ä¸ºä¸€ä¸ªç©ºæ ¼ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Grid</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">Grid</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Grid</span>&gt;</span></span><br><span class="line">  Hello world!</span><br><span class="line"><span class="tag">&lt;/<span class="name">Grid</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Grid</span>&gt;</span></span><br><span class="line">  Hello</span><br><span class="line">  world!</span><br><span class="line"><span class="tag">&lt;/<span class="name">Grid</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Grid</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  Hello world!</span><br><span class="line"><span class="tag">&lt;/<span class="name">Grid</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™å°±æ„å‘³ç€ä»¥ä¸Šå½¢å¼æœ€åæ¸²æŸ“å‡ºæ¥çš„æ•ˆæœä¸€è‡´ã€‚</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥å°†æ–‡å­—å’Œç»„ä»¶ç»“åˆèµ·æ¥ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Grid&gt;</span><br><span class="line">  Here is a row:</span><br><span class="line">  &lt;Row /&gt;</span><br><span class="line">  Here is another row:</span><br><span class="line">  &lt;Row /&gt;</span><br><span class="line">&lt;<span class="regexp">/Grid&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¤ä¸ºchildrenä»£è¡¨ç€ç»„ä»¶æ ‡ç­¾å†…éƒ¨çš„æ‰€æœ‰ä»»æ„ä¸œè¥¿ã€‚</p>
<ul>
<li><strong>childçš„åŠŸèƒ½</strong></li>
</ul>
<p>åŒæ ·æˆ‘ä»¬å¯ä»¥ä¼ é€’ä»»ä½•çš„jsè¡¨è¾¾å¼ä½œä¸ºchildrenï¼ŒåŒ…æ‹¬å‡½æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Executioner</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;          </span><br><span class="line">    <span class="comment">// æ‹¿åˆ° childrenï¼Œç„¶åè°ƒç”¨æ‰§è¡Œ        â†“</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.props.children()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨</span></span><br><span class="line">&lt;Executioner&gt;</span><br><span class="line">  &#123;() =&gt; <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>&#125;</span><br><span class="line">&lt;<span class="regexp">/Executioner&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸è¦æ‹…å¿ƒè¿™äº›è¶…å‡ºäº†ä½ çš„è„‘å®¹é‡ã€‚æˆ‘æƒ³è¦çš„æ˜¯å½“ä½ ä»¥åé‡åˆ°è¿™ç§æƒ…å†µæ—¶ä¸å†æƒŠè®¶ã€‚æœ‰äº†childrenä»€ä¹ˆäº‹éƒ½ä¼šå‘ç”Ÿã€‚</p>
<ul>
<li><strong>childrençš„ä½¿ç”¨</strong></li>
</ul>
<p>ä»æœ¬è´¨ä¸Šæ¥è®²ï¼Œ props.children å¯ä»¥ä½¿ä»»ä½•çš„ç±»å‹ï¼Œæ¯”å¦‚æ•°ç»„ã€å‡½æ•°ã€å¯¹è±¡ç­‰ç­‰ã€‚</p>
<blockquote>
<p>å¾ªç¯ <code>React.Children.map(this.props.children, (child, i) =&gt; {})</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IgnoreFirstChild</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> children = <span class="keyword">this</span>.props.children</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;React.Children.map(children, (child, i) =&gt; &#123;</span><br><span class="line">          <span class="comment">// Ignore the first child</span></span><br><span class="line">          <span class="keyword">if</span> (i &lt; <span class="number">1</span>) <span class="keyword">return</span></span><br><span class="line">          <span class="keyword">return</span> child</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ this.props.children.map çš„æ–¹æ³•ã€‚ä½†è¦æ˜¯æœ‰äººè®²ä¸€ä¸ªå‡½æ•°ä½œä¸ºchildä¼ é€’è¿‡æ¥å°†ä¼šæŠ¥é”™ã€‚</p>
<blockquote>
<p>è®¡æ•° <code>React.Children.count(this.props.children)</code></p>
</blockquote>
<p>å› ä¸ºthis.props.children å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„ï¼Œæ£€æŸ¥ä¸€ä¸ªç»„ä»¶æœ‰å¤šå°‘ä¸ªchildrenæ˜¯éå¸¸å›°éš¾çš„ã€‚å¤©çœŸçš„ä½¿ç”¨ this.props.children.length ï¼Œå½“ä¼ é€’äº†å­—ç¬¦ä¸²æˆ–è€…å‡½æ•°æ—¶ç¨‹åºä¾¿ä¼šä¸­æ–­ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸ªchildï¼šâ€Hello World!â€ ï¼Œä½†æ˜¯ä½¿ç”¨ .length çš„æ–¹æ³•å°†ä¼šæ˜¾ç¤ºä¸º12ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æœ‰ React.Children.count æ–¹æ³•çš„åŸå› </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildrenCounter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>React.Children.count(this.props.children)<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// Renders "1"</span><br><span class="line"><span class="tag">&lt;<span class="name">ChildrenCounter</span>&gt;</span></span><br><span class="line">  Second!</span><br><span class="line"><span class="tag">&lt;/<span class="name">ChildrenCounter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// Renders "2"</span><br><span class="line"><span class="tag">&lt;<span class="name">ChildrenCounter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>First<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ChildComponent</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ChildrenCounter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// Renders "3"</span><br><span class="line"><span class="tag">&lt;<span class="name">ChildrenCounter</span>&gt;</span></span><br><span class="line">  &#123;() =&gt; <span class="tag">&lt;<span class="name">h1</span>&gt;</span>First!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>&#125;</span><br><span class="line">  Second!</span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Third!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ChildrenCounter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>è½¬æ¢ä¸ºæ•°ç»„ <code>React.Children.toArray(this.props.children)</code></p>
</blockquote>
<p>é€šè¿‡ React.Children.toArray æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sort</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> children = React.Children.toArray(<span class="keyword">this</span>.props.children)</span><br><span class="line">    <span class="comment">// Sort and render the children</span></span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;children.sort().join(' ')&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;Sort&gt;</span><br><span class="line">  <span class="comment">// We use expression containers to make sure our strings</span></span><br><span class="line">  <span class="comment">// are passed as three children, not as one string</span></span><br><span class="line">  &#123;<span class="string">'bananas'</span>&#125;&#123;<span class="string">'oranges'</span>&#125;&#123;<span class="string">'apples'</span>&#125;</span><br><span class="line">&lt;<span class="regexp">/Sort&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>é™åˆ¶children</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥é™åˆ¶åªä¼ å…¥å‡½æ•°ä½œä¸ºå­ç»„ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class Executioner extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return this.props.children()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Executioner.propTypes = &#123;</span><br><span class="line">  children: React.PropTypes.func.isRequired,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é™åˆ¶åªä¼ å…¥ä¸€ä¸ªchild</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Executioner</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> React.Children.only(<span class="keyword">this</span>.props.children)()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·åªä¼šè¿”å›ä¸€ä¸ªchildã€‚å¦‚æœä¸æ­¢ä¸€ä¸ªchildï¼Œå®ƒå°±ä¼šæŠ›å‡ºé”™è¯¯.</p>
<blockquote>
<p>æ”¹å˜children</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RadioGroup</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">    <span class="comment">// Bind the method to the component context</span></span><br><span class="line">    <span class="keyword">this</span>.renderChildren = <span class="keyword">this</span>.renderChildren.bind(<span class="keyword">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  renderChildren() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> Change the name prop of all children</span></span><br><span class="line">    <span class="comment">// to this.props.name</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.props.children</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"group"</span>&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.renderChildren()&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>åŒæ ·æˆ‘ä»¬å¯ä»¥éå†this.props.childrenï¼Œç„¶åç¼–è¾‘childrençš„å±æ€§ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">renderChildren() &#123;</span><br><span class="line">  <span class="keyword">return</span> React.Children.map(<span class="keyword">this</span>.props.children, child =&gt; &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> Change the name prop to this.props.name</span></span><br><span class="line">    <span class="keyword">return</span> child</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>ç¼–è¾‘children &amp;&amp; å…‹éš†å…ƒç´ </p>
</blockquote>
<p>React.cloneElement ä¼šå…‹éš†ä¸€ä¸ªå…ƒç´ ã€‚æˆ‘ä»¬å°†æƒ³è¦å…‹éš†çš„å…ƒç´ å½“ä½œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç„¶åå°†æƒ³è¦è®¾ç½®çš„å±æ€§ä»¥å¯¹è±¡çš„æ–¹å¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">renderChildren() &#123;</span><br><span class="line">  <span class="keyword">return</span> React.Children.map(<span class="keyword">this</span>.props.children, child =&gt; &#123;</span><br><span class="line">    <span class="comment">// é¦–å…ˆéå†</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç„¶åå…‹éš†å…ƒç´ ï¼Œä¸ºå…¶è®¾ç½®å±æ€§</span></span><br><span class="line">    <span class="keyword">return</span> React.cloneElement(child, &#123;</span><br><span class="line">      name: <span class="keyword">this</span>.props.name</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RadioGroup</span> <span class="attr">name</span>=<span class="string">"g1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">RadioButton</span> <span class="attr">value</span>=<span class="string">"first"</span>&gt;</span>First<span class="tag">&lt;/<span class="name">RadioButton</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">RadioButton</span> <span class="attr">value</span>=<span class="string">"second"</span>&gt;</span>Second<span class="tag">&lt;/<span class="name">RadioButton</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">RadioButton</span> <span class="attr">value</span>=<span class="string">"third"</span>&gt;</span>Third<span class="tag">&lt;/<span class="name">RadioButton</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7110480-617905bd3827042d.png" alt></p>
<p>============================== æˆ‘æ˜¯åä¸½çš„ç»“æŸåˆ†å‰²çº¿ ==============================</p>
<p><strong>å¯ä»¥ä½¿ç”¨å‡½æ•°propsæ¥å®ç°çˆ¶å­ç»„ä»¶ä¹‹é—´çš„é€šä¿¡</strong></p>
<p>å…·ä½“è¿‡ç¨‹ï¼šçˆ¶ç»„ä»¶ä¼ é€’ä¸€ä¸ªè‡ªå·±å†…éƒ¨å®šä¹‰çš„å‡½æ•°ç»™å­ç»„ä»¶ï¼Œè‡ªç»„ä»¶å¯ä»¥é€šè¿‡æŸç§äº‹ä»¶è§¦å‘æ¥æ”¶åˆ°çš„prop å‡½æ•°ï¼Œç„¶åä¼ å…¥å‚æ•°å¯ä»¥å°†å…¶ä¼ ç»™çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶å³å¯æ¥æ”¶åˆ°ã€‚</p>
<h2 id="14ã€ç”Ÿå‘½å‘¨æœŸ"><a href="#14ã€ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="14ã€ç”Ÿå‘½å‘¨æœŸ"></a>14ã€ç”Ÿå‘½å‘¨æœŸ</h2><p>åœ¨React ä¸­ç»„ä»¶(Component)ä¹Ÿæ˜¯æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ã€‚</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/29/16b0296b2bc89305?w=740&amp;h=900&amp;f=png&amp;s=187103" alt></p>
<h3 id="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåˆ†æˆä¸‰ä¸ªçŠ¶æ€ï¼š"><a href="#ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåˆ†æˆä¸‰ä¸ªçŠ¶æ€ï¼š" class="headerlink" title="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåˆ†æˆä¸‰ä¸ªçŠ¶æ€ï¼š"></a>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåˆ†æˆä¸‰ä¸ªçŠ¶æ€ï¼š</h3><ul>
<li>mounting æŒ‚è½½é˜¶æ®µ</li>
<li>updating  æ›´æ–°é˜¶æ®µ</li>
<li>unmounting å¸è½½é˜¶æ®µ</li>
</ul>
<h3 id="Mountingè£…è½½é˜¶æ®µ"><a href="#Mountingè£…è½½é˜¶æ®µ" class="headerlink" title="Mountingè£…è½½é˜¶æ®µ"></a>Mountingè£…è½½é˜¶æ®µ</h3><ul>
<li><code>getInitialState</code>: åœ¨ç»„ä»¶æŒ‚è½½ä¹‹å‰è°ƒç”¨ä¸€æ¬¡ï¼Œæ¯”å¦‚æˆ‘ä»¬é€šå¸¸åœ¨è¿™é‡Œåˆå§‹åŒ–æˆ‘ä»¬çš„stateã€‚es6classçš„æ–¹å¼ä¸­æ˜¯åœ¨constructorä¸­ã€‚</li>
<li><code>componentWillMount</code>: æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯éƒ½åªè°ƒç”¨ä¸€æ¬¡ï¼Œåœ¨åˆå§‹åŒ–æ¸²æŸ“æ‰§è¡Œä¹‹å‰ç«‹åˆ»è°ƒç”¨ã€‚</li>
<li><code>componentDidMount()</code>: åˆå§‹åŒ–æ¸²æŸ“å®Œæˆä¹‹åè°ƒç”¨,åªè°ƒç”¨ä¸€æ¬¡ï¼Œä»…å®¢æˆ·ç«¯æœ‰æ•ˆï¼ˆæœåŠ¡å™¨ç«¯ä¸ä¼šè°ƒç”¨ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>æ€»ç»“ï¼šcomponentWillMount()åœ¨renderä¹‹å‰æ‰§è¡Œï¼ŒcomponentDidMountåœ¨renderä¹‹åæ‰§è¡Œã€‚å¹¶ä¸”éƒ½åªæ‰§è¡Œä¸€æ¬¡ã€‚å¦‚æœæˆ‘ä»¬åœ¨componentWillMountä¸­æ‰§è¡ŒsetStateæ–¹æ³•ï¼Œstateä¼šå˜åŒ–ä¸¤æ¬¡ï¼Œä½†æ˜¯åªæ¸²æŸ“ä¸€æ¬¡ï¼Œæ‰€ä»¥åœ¨è¿™é‡ŒsetStateå…¶å®æ˜¯æ— æ„ä¹‰çš„ã€‚å¦‚æœåœ¨componentDidMountä¸­setStateä¼šæ¸²æŸ“ä¸¤æ¬¡ï¼Œä¸è¿‡åœ¨åˆå§‹åŒ–ä¸­å°±æ¸²æŸ“ä¸¤æ¬¡å…¶å®å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œä½†æ˜¯æœ‰æ—¶å€™è¿™ç§æƒ…å†µè¿˜æ˜¯å¿…é¡»è¦å‡ºç°çš„ã€‚</p>
</blockquote>
<h3 id="UpdatIngæ›´æ–°é˜¶æ®µ"><a href="#UpdatIngæ›´æ–°é˜¶æ®µ" class="headerlink" title="UpdatIngæ›´æ–°é˜¶æ®µ"></a>UpdatIngæ›´æ–°é˜¶æ®µ</h3><ul>
<li><p><code>componentWillReceiveProps(object nextProps)</code>: åœ¨ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ props çš„æ—¶å€™è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ¸²æŸ“çš„æ—¶å€™ï¼Œè¯¥æ–¹æ³•ä¸ä¼šè°ƒç”¨ã€‚</p>
<p>  ç”¨æ­¤å‡½æ•°å¯ä»¥ä½œä¸º react åœ¨ prop ä¼ å…¥ä¹‹åï¼Œ render() æ¸²æŸ“ä¹‹å‰æ›´æ–° state çš„æœºä¼šã€‚è€çš„ props å¯ä»¥é€šè¿‡ this.props è·å–åˆ°ã€‚åœ¨è¯¥å‡½æ•°ä¸­è°ƒç”¨ this.setState() å°†ä¸ä¼šå¼•èµ·ç¬¬äºŒæ¬¡æ¸²æŸ“ã€‚</p>
</li>
<li><p><code>shouldComponentUpdate(object nextProps, object nextState)</code>:åœ¨æ¥æ”¶åˆ°æ–°çš„ props æˆ–è€… stateï¼Œå°†è¦æ¸²æŸ“ä¹‹å‰è°ƒç”¨ã€‚</p>
<p>  è¯¥æ–¹æ³•åœ¨åˆå§‹åŒ–æ¸²æŸ“çš„æ—¶å€™ä¸ä¼šè°ƒç”¨ã€‚å¦‚æœç¡®å®šæ–°çš„ props å’Œ state ä¸ä¼šå¯¼è‡´ç»„ä»¶æ›´æ–°ï¼Œåˆ™æ­¤å¤„åº”è¯¥ è¿”å› falseã€‚</p>
<blockquote>
<p>å¿ƒå¾—ï¼šæˆ‘ä»¬å¯ä»¥å€ŸåŠ©è¯¥æ–¹æ³•æ¥å®ç°ä¸€äº›ä¼˜åŒ–ï¼Œæ¯”å¦‚å¯ä»¥æ ¹æ®æ–°çš„propså’Œstateæ¥å†³å®šæ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“é¡µé¢</p>
</blockquote>
</li>
<li><p><code>componentWillUpdate(object nextProps, object nextState)ï¼š</code>åœ¨æ¥æ”¶åˆ°æ–°çš„ props æˆ–è€… state ä¹‹å‰ç«‹åˆ»è°ƒç”¨ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šä½ ä¸èƒ½åœ¨è¯¥æ–¹æ³•ä¸­ä½¿ç”¨ this.setState()ã€‚å¦‚æœéœ€è¦æ›´æ–° state æ¥å“åº”æŸä¸ª prop çš„æ”¹å˜ï¼Œè¯·ä½¿ç”¨ componentWillReceivePropsã€‚</p>
</blockquote>
</li>
<li><p><code>componentDidUpdate(object prevProps, object prevState):</code> åœ¨ç»„ä»¶çš„æ›´æ–°å·²ç»åŒæ­¥åˆ° DOM ä¸­ä¹‹åç«‹åˆ»è¢«è°ƒç”¨ã€‚</p>
<p>  ä½¿ç”¨è¯¥æ–¹æ³•å¯ä»¥åœ¨ç»„ä»¶æ›´æ–°ä¹‹åæ“ä½œ DOM å…ƒç´ ã€‚</p>
</li>
</ul>
<blockquote>
<p>componentWillUpdateå’ŒcomponentDidUpdateè¡¨ç¤ºæ›´æ–°è¿‡ç¨‹ä¸­æ¸²æŸ“å‰åçš„è¿‡ç¨‹ã€‚shouldComponentUpdateå¯ä»¥å†³å®šæˆ‘ä»¬æ˜¯å¦å»æ‰§è¡Œé¡µé¢çš„é‡æ–°æ¸²æŸ“ã€‚é»˜è®¤è¿”å›trueï¼Œå§‹ç»ˆéƒ½é‡æ–°æ¸²æŸ“ã€‚stateå˜åŒ–ä¹‹åä¼šä¾æ¬¡è§¦å‘shouldComponentUpdateã€componentWillUpdateã€componentDidUpdateã€‚ä½ ä¸èƒ½åœ¨componentWillUpdateä¸­è°ƒç”¨setStateï¼Œå› ä¸ºè¿™æ ·æ²¡æ„ä¹‰ã€‚</p>
</blockquote>
<blockquote>
<p>ä¼ å…¥çš„propså‘ç”Ÿå˜åŒ–ä¹‹åï¼Œä¼šé¦–å…ˆè§¦å‘componentWillReceivePropsã€‚è¿™ä¸ªæ–¹æ³•å¯ä»¥æ¥æ”¶åˆ°æˆ‘ä»¬æ–°çš„propsï¼ŒåŒæ—¶åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æˆ‘ä»¬è¿˜èƒ½è·å–åˆ°æ—§çš„propsï¼ˆthis.propsï¼‰ã€‚å› æ­¤è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥setStateï¼Œæ ¹æ®æˆ‘ä»¬çš„æ–°æ—§propsã€‚</p>
</blockquote>
<h3 id="UnMountingå¸è½½"><a href="#UnMountingå¸è½½" class="headerlink" title="UnMountingå¸è½½"></a>UnMountingå¸è½½</h3><ul>
<li><p><code>componentWillUnmountï¼š</code>åœ¨ç»„ä»¶ä» DOM ä¸­ç§»é™¤çš„æ—¶å€™ç«‹åˆ»è¢«è°ƒç”¨ã€‚</p>
<p>  åœ¨è¯¥æ–¹æ³•ä¸­æ‰§è¡Œä»»ä½•å¿…è¦çš„æ¸…ç†ï¼Œæ¯”å¦‚æ— æ•ˆçš„å®šæ—¶å™¨ï¼Œæˆ–è€…æ¸…é™¤åœ¨ componentDidMount ä¸­åˆ›å»ºçš„ DOM å…ƒç´ ã€‚</p>
</li>
</ul>
<h2 id="15ã€ReactDOM"><a href="#15ã€ReactDOM" class="headerlink" title="15ã€ReactDOM"></a>15ã€ReactDOM</h2><p>react-dom çš„ package æä¾›äº†å¯åœ¨åº”ç”¨é¡¶å±‚ä½¿ç”¨çš„ DOMï¼ˆDOM-specificï¼‰æ–¹æ³•ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œä½ å¯ä»¥æŠŠè¿™äº›æ–¹æ³•ç”¨äº React æ¨¡å‹ä»¥å¤–çš„åœ°æ–¹ã€‚ä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¤§éƒ¨åˆ†ç»„ä»¶éƒ½ä¸éœ€è¦ä½¿ç”¨è¿™ä¸ªæ¨¡å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">render()</span><br><span class="line">hydrate()</span><br><span class="line">unmountComponentAtNode()</span><br><span class="line">findDOMNode()</span><br><span class="line">createPortal()</span><br></pre></td></tr></table></figure>
<h3 id="1-ã€render"><a href="#1-ã€render" class="headerlink" title="[1]ã€render"></a>[1]ã€render</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(element, container[, callback])</span><br></pre></td></tr></table></figure>
<p>åœ¨æä¾›çš„ container é‡Œæ¸²æŸ“ä¸€ä¸ª React å…ƒç´ ï¼Œå¹¶è¿”å›å¯¹è¯¥ç»„ä»¶çš„å¼•ç”¨ï¼ˆæˆ–è€…é’ˆå¯¹æ— çŠ¶æ€ç»„ä»¶è¿”å› nullï¼‰ã€‚Reactæ¸²æŸ“çš„è™šæ‹ŸDOMæ¸²æŸ“åˆ°æµè§ˆå™¨DOMä¸­å°±éœ€è¦renderæ–¹æ³•äº†ã€‚</p>
<p>å¦‚æœæä¾›äº†å¯é€‰çš„å›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå°†åœ¨ç»„ä»¶è¢«æ¸²æŸ“æˆ–æ›´æ–°ä¹‹åè¢«æ‰§è¡Œã€‚</p>
<ul>
<li><p>ReactDOM.render() ä¼šæ§åˆ¶ä½ ä¼ å…¥å®¹å™¨èŠ‚ç‚¹é‡Œçš„å†…å®¹ã€‚å½“é¦–æ¬¡è°ƒç”¨æ—¶ï¼Œå®¹å™¨èŠ‚ç‚¹é‡Œçš„æ‰€æœ‰ DOM å…ƒç´ éƒ½ä¼šè¢«æ›¿æ¢ï¼Œåç»­çš„è°ƒç”¨åˆ™ä¼šä½¿ç”¨ React çš„ DOM å·®åˆ†ç®—æ³•ï¼ˆDOM diffing algorithmï¼‰è¿›è¡Œé«˜æ•ˆçš„æ›´æ–°ã€‚</p>
</li>
<li><p>ReactDOM.render() ç›®å‰ä¼šè¿”å›å¯¹æ ¹ç»„ä»¶ ReactComponent å®ä¾‹çš„å¼•ç”¨ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦ä½¿ç”¨ã€‚</p>
</li>
</ul>
<h3 id="2-ã€hydrate"><a href="#2-ã€hydrate" class="headerlink" title="[2]ã€hydrate()"></a>[2]ã€hydrate()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.hydrate(element, container[, callback])</span><br></pre></td></tr></table></figure>
<p>ä¸ render() ç›¸åŒï¼Œä½†å®ƒç”¨äºåœ¨ ReactDOMServer æ¸²æŸ“çš„å®¹å™¨ä¸­å¯¹ HTML çš„å†…å®¹è¿›è¡Œ hydrate æ“ä½œã€‚React ä¼šå°è¯•åœ¨å·²æœ‰æ ‡è®°ä¸Šç»‘å®šäº‹ä»¶ç›‘å¬å™¨ã€‚</p>
<h3 id="3-ã€unmountComponentAtNode"><a href="#3-ã€unmountComponentAtNode" class="headerlink" title="[3]ã€unmountComponentAtNode()"></a>[3]ã€unmountComponentAtNode()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.unmountComponentAtNode(container)</span><br></pre></td></tr></table></figure>
<p>ä» DOM ä¸­å¸è½½ç»„ä»¶ï¼Œä¼šå°†å…¶äº‹ä»¶å¤„ç†å™¨ï¼ˆevent handlersï¼‰å’Œ state ä¸€å¹¶æ¸…é™¤ã€‚å¦‚æœæŒ‡å®šå®¹å™¨ä¸Šæ²¡æœ‰å¯¹åº”å·²æŒ‚è½½çš„ç»„ä»¶ï¼Œè¿™ä¸ªå‡½æ•°ä»€ä¹ˆä¹Ÿä¸ä¼šåšã€‚å¦‚æœç»„ä»¶è¢«ç§»é™¤å°†ä¼šè¿”å› trueï¼Œå¦‚æœæ²¡æœ‰ç»„ä»¶å¯è¢«ç§»é™¤å°†ä¼šè¿”å› falseã€‚</p>
<h3 id="4-ã€findDOMNode"><a href="#4-ã€findDOMNode" class="headerlink" title="[4]ã€findDOMNode()"></a>[4]ã€findDOMNode()</h3><blockquote>
<p>findDOMNode æ˜¯ä¸€ä¸ªè®¿é—®åº•å±‚ DOM èŠ‚ç‚¹çš„åº”æ€¥æ–¹æ¡ˆï¼ˆescape hatchï¼‰ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸æ¨èä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå› ä¸ºå®ƒä¼šç ´åç»„ä»¶çš„æŠ½è±¡ç»“æ„ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.findDOMNode(component)</span><br><span class="line"></span><br><span class="line">ReactDOM.findDOMNode(this); // å¯ä»¥è·å–å½“å‰ç»„ä»¶è‡ªèº«å®ä¾‹</span><br></pre></td></tr></table></figure>
<p><strong>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ç»‘å®šä¸€ä¸ª ref åˆ° DOM èŠ‚ç‚¹ä¸Šï¼Œå¯ä»¥å®Œå…¨é¿å…ä½¿ç”¨ findDOMNodeã€‚</strong></p>
<h2 id="16ã€ref"><a href="#16ã€ref" class="headerlink" title="16ã€ref"></a>16ã€ref</h2><p>React.js å½“ä¸­æä¾›äº† ref å±æ€§æ¥å¸®åŠ©æˆ‘ä»¬è·å–å·²ç»æŒ‚è½½çš„å…ƒç´ çš„ DOM èŠ‚ç‚¹ï¼Œä½ å¯ä»¥ç»™æŸä¸ª JSX å…ƒç´ åŠ ä¸Š refå±æ€§ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AutoFocusInput</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  componentDidMount () &#123;</span><br><span class="line">    <span class="keyword">this</span>.input.focus()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;input ref=&#123;(input) =&gt; <span class="keyword">this</span>.input = input&#125; /&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;AutoFocusInput /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>å½“ input å…ƒç´ åœ¨é¡µé¢ä¸ŠæŒ‚è½½å®Œæˆä»¥åï¼ŒReact.js å°±ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªæŒ‚è½½ä»¥åçš„ DOM èŠ‚ç‚¹ä¼ ç»™è¿™ä¸ªå‡½æ•°ã€‚åœ¨å‡½æ•°ä¸­æˆ‘ä»¬æŠŠè¿™ä¸ª DOM å…ƒç´ è®¾ç½®ä¸ºç»„ä»¶å®ä¾‹çš„ä¸€ä¸ªå±æ€§ï¼Œè¿™æ ·ä»¥åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ this.input è·å–åˆ°è¿™ä¸ª DOM å…ƒç´ ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥ç»™ä»»æ„ä»£è¡¨ HTML å…ƒç´ æ ‡ç­¾åŠ ä¸Š ref ä»è€Œè·å–åˆ°å®ƒ DOM å…ƒç´ ç„¶åè°ƒç”¨ DOM APIã€‚ä½†æ˜¯è®°ä½ä¸€ä¸ªåŸåˆ™ï¼š<strong>èƒ½ä¸ç”¨ ref å°±ä¸ç”¨</strong>ã€‚ç‰¹åˆ«æ˜¯è¦é¿å…ç”¨ ref æ¥åš React.js æœ¬æ¥å°±å¯ä»¥å¸®åŠ©ä½ åšåˆ°çš„é¡µé¢è‡ªåŠ¨æ›´æ–°çš„æ“ä½œå’Œäº‹ä»¶ç›‘å¬ã€‚</p>
</blockquote>
<p>å…¶å®å¯ä»¥ç»™ç»„ä»¶æ ‡ç­¾ä¹ŸåŠ ä¸Š ref ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Clock ref=&#123;(clock) =&gt; this.clock = clock&#125; /&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä½ è·å–åˆ°çš„æ˜¯è¿™ä¸ª Clock ç»„ä»¶åœ¨ React.js å†…éƒ¨åˆå§‹åŒ–çš„å®ä¾‹ã€‚ä½†è¿™å¹¶ä¸æ˜¯ä»€ä¹ˆå¸¸ç”¨çš„åšæ³•ï¼Œè€Œä¸”ä¹Ÿå¹¶ä¸å»ºè®®è¿™ä¹ˆåšï¼Œæ‰€ä»¥è¿™é‡Œå°±ç®€å•æåŠï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªå·±å­¦ä¹ æ¢ç´¢ã€‚</p>
<p>åŒæ ·refä¹Ÿæ”¯æŒå­—ç¬¦ä¸²å½¢å¼ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AutoFocusInput</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  componentDidMount () &#123;</span><br><span class="line">    <span class="keyword">const</span> comp  = <span class="keyword">this</span>.refs.mycomp; <span class="comment">// compåªæ˜¯Compçš„ä¸€ä¸ªå®ä¾‹ï¼Œå› æ­¤éœ€è¦findDOMNodeè½¬æ¢ä¸ºç›¸åº”çš„DOMã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> dom = ReactDOM.findDOMNode(comp);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Comp ref=<span class="string">"mycomp"</span> /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>refsä¼šè¿”å›ä¸€ä¸ªç»„ä»¶å®ä¾‹ï¼Œæ‰€ä»¥å¯ä»¥è°ƒç”¨å®ä¾‹ä¸­çš„æ–¹æ³•ï¼Œå¦‚æœéœ€è¦è®¿é—®è¯¥ç»„ä»¶çš„çœŸå®DOMï¼Œé‚£ä¹ˆéœ€è¦ReactDOM.findDOMNode().æ¥æ‰¾åˆ°DOMèŠ‚ç‚¹ï¼Œä½†æ˜¯å¹¶ä¸æ¨èè¿™ä¹ˆåšã€‚å› ä¸ºè¿™å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ‰“ç ´äº†å°è£…æ€§ï¼Œå¦‚æœèƒ½ä½¿ç”¨æ›´å¥½çš„æ–¹æ³•è§£å†³æˆ‘ä»¬ä¾¿ä¸è¦è¿™ä¹ˆåšã€‚ï¼ˆæ— çŠ¶æ€ç»„ä»¶ä¸èƒ½ä½¿ç”¨refsï¼Œå› ä¸ºå…¶æŒ‚è½½æ—¶åªæ˜¯å‡½æ•°æ‰§è¡Œï¼Œå¹¶ä¸æ˜¯å®ä¾‹åˆ›å»ºã€‚ï¼‰</p>
</blockquote>
<blockquote>
<p>æœªå®Œå¾…ç»­ï½</p>
</blockquote>
    </div>
  </div>
  
    <div class="copy-right">
      <div class="markdown-body">
        <blockquote>
        
        
          æœ¬æ–‡ä½œè€… : å¼ é”¦æ° <br>
        
        åŸæ–‡é“¾æ¥ : <a href>http://yoursite.com/2019/06/03/react-interview-01/</a><br>
        ç‰ˆæƒå£°æ˜ : æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
        </blockquote>
      </div>
    </div>
  
  
  
    <div class="social-share" style="margin-top: -2rem" data-wechat-qrcode-title="<p>å¾®ä¿¡æ‰«ä¸€æ‰«</p>" data-wechat-qrcode-helper="<p>å¾®ä¿¡å³ä¸Šè§’, æ‰«ä¸€æ‰«åˆ†äº«</p>" data-sites="qzone, qq, weibo, wechat, douban, google, facebook, twitter">
  <span style="color: #6b7487; font-size: 1.4rem;">åˆ†äº«åˆ°: </span>
</div>
<script src="https://cdn.bootcss.com/social-share.js/1.0.16/js/social-share.min.js" async></script>
  

  
    <div id="reward">
  
    <p id="reward-meta">çŸ¥è¯† & æƒ…æ€€ | äºŒè€…å…¼å¾—</p>
  
  <button id="reward-btn">
    
    <span>æŠ•é£Ÿ</span>
  </button>
  <div id="reward-qrcode">
    
      <div class="reward-qrcode--container">
        <img class="qrcode-img" src alt="å¾®ä¿¡æ‰«ä¸€æ‰«, å‘æˆ‘æŠ•é£Ÿ">
        <p class="qrcode-meta">å¾®ä¿¡æ‰«ä¸€æ‰«, å‘æˆ‘æŠ•é£Ÿ</p>
      </div>
    
      <div class="reward-qrcode--container">
        <img class="qrcode-img" src alt="æ”¯ä»˜å®æ‰«ä¸€æ‰«, å‘æˆ‘æŠ•é£Ÿ">
        <p class="qrcode-meta">æ”¯ä»˜å®æ‰«ä¸€æ‰«, å‘æˆ‘æŠ•é£Ÿ</p>
      </div>
    
  </div>

</div>

<script>
  (() => {
    let button = document.querySelector('#reward-btn'),
      qrcode = document.querySelector('#reward-qrcode'),
      display = false;
    
    button.addEventListener('click', () => {
      qrcode.style.display = display ? 'none' : 'block'
      display = !display
    }, false)
  })()
</script>
  

  <div class="article-footer">
    <div class="article-meta pull-left">
      <span>
        
          <i class="iconfont icon-06tags"></i>æ ‡ç­¾: 
          
          <span class="span--tag">
            <a href="/tags/é¢è¯•/">
              #é¢è¯•
            </a>
          </span>
          
          <span class="span--tag">
            <a href="/tags/React/">
              #React
            </a>
          </span>
          
        
      </span>
    </div>
    <div class="article-meta pull-right">
    </div>
  </div>
</div>


  <aside id="sidebar">
    <p id="sidebar-header"></p>
    <ol id="sidebar-toc"></ol>
  </aside>
  <script async>setTimeout(generateToc, 10);</script>


  <nav class="post-navigation">
    
      <div class="nav-pre">
        <i class="iconfont icon-prev"></i>
        ä¸Šä¸€ç¯‡:
        <a href="/2019/05/27/react-money-book-note/" target="_self">Reactè®°è´¦æœ¬é¡¹ç›®å°è®°</a>
      </div>
    
    
      <div class="nav-next">
        ä¸‹ä¸€ç¯‡:
        <a href="/2019/06/06/react-interview-02/" target="_self">React ä»åŸºç¡€åˆ°è¿›é˜¶ï¼ˆäºŒï¼‰</a>
        <i class="iconfont icon-next"></i>
      </div>
    
  </nav>

  
    <a href="#comment" class="comment-anchor"></a>
<div class="comment-title"><i class="iconfont icon-footprint"></i> ç•™ä¸‹è¶³è¿¹ <i class="iconfont icon-footprint"></i></div>
<div id="vcomments"></div>

<script defer>
  if( true ) {
    let path = getRealPath()
    new Valine({
      el: "#vcomments",
      appId: "Hyq9wkH495DgNHWhDQCOfQSp-gzGzoHsz",
      appKey: "WaR7nrzhliHj9aVwdQzkdlGd",
      notify: false,
      verify: false,
      avatar: "robohash",
      placeholder: "æ­£ç¡®å¡«å†™é‚®ç®±, æ‰èƒ½åŠæ—¶æ”¶åˆ°å›å¤å“¦â™ª(^âˆ‡^*)",
      path
    });
  }
</script>
   

  
    <script defer>
const valineAPI = (() => {
  try {
    AV.init("Hyq9wkH495DgNHWhDQCOfQSp-gzGzoHsz", "WaR7nrzhliHj9aVwdQzkdlGd");
  } catch(error) {}
  const isExist = (identity) => {
    identity = identity || getRealPath();
    let query = new AV.Query('Timer');
    return new Promise((resolve, reject) => {
      query.equalTo("identity", identity);
      query.find().then(results => {
        resolve(results.length > 0);
      }, error => reject(error));
    })
  }

  const _get = (identity) => {
    let query = null;
    if(identity && identity instanceof Array){
      let querys = [];
      for(let i = 0; i < identity.length; ++i) {
        querys[i] = new AV.Query('Timer');
        querys[i].equalTo('identity', identity[i]);
      }
      query = AV.Query.or.apply(null ,querys);
    } else {
      identity = identity || getRealPath();
      query = new AV.Query("Timer");
      query.equalTo("identity", identity);
    }

    return new Promise((resolve, reject) => {
      query.find()
      .then(results => resolve(results))
      .catch(error => reject(error))
    })
  }

  const create = (identity) => {
    identity = identity || getRealPath();
    return new Promise((resolve, reject) => {
      let Todo = AV.Object.extend('Timer');
      let todo = new Todo();
      todo.set("times", 1);
      todo.set("identity", identity);
      todo.save().then(res => resolve(true), error => reject(error));
    })
  }

  const update = (identity) => {
    identity = identity || getRealPath();
    return new Promise((resolve, reject) => {
      let query = new AV.Query('Timer');
      query.equalTo("identity", identity);
      query.find().then(todos => {
        todos.forEach(todo => {
          todo.set("times", todo.attributes.times + 1);
        });
        return AV.Object.saveAll(todos);
      }).then(todos => resolve(true), error => reject(error));
    })
  }

  return {
    isExist,
    _get,
    update,
    create
  }
})()

const calcAndWriteTimes = () => {
  let isPost = true;

  let timerAllDOM = document.querySelectorAll(".article-timer");

  if(isPost) {
    let identity = timerAllDOM[0].getAttribute("data-identity");
    valineAPI.isExist(identity)
    .then(exist => {
      if(exist) {
        return valineAPI.update(identity);
      }
      return new Promise(resolve => resolve(true));
    })
    .then( succuess => valineAPI._get(identity))
    .then( result => timerAllDOM[0].innerText = result[0].attributes.times)
    .catch(error => console.log(error.message))
    return ;
  }

  let timerDOMCache = {};

  for(let timerDOM of timerAllDOM) {
    let identity = timerDOM.getAttribute("data-identity");
    if(timerDOMCache.hasOwnProperty(identity)){
      timerDOMCache[identity].dom.push(timerDOM);
    }else{
      timerDOMCache[identity] = {
        dom: [timerDOM],
        times: undefined
      };
    }
  }

  let identities = Object.keys(timerDOMCache);
  valineAPI._get(identities).then(results => {
    for(let result of results) {
      let {identity, times} = result.attributes;
      timerDOMCache[identity].times = times;
      timerDOMCache[identity].dom.map(item => item.innerText = times);
    }
    for(let identity of identities) {
      if(timerDOMCache[identity].times){
        continue;
      }
      timerDOMCache[identity].dom.map(item => item.innerText = 1);
      valineAPI.create(identity);
    }
  }).catch(error => console.log(error.message))
}

if(true){
  calcAndWriteTimes();
}
</script>
   

</div>


      <footer>
  <p class="site-info">
    åšå®¢å·²èŒèŒå“’è¿è¡Œ<span id="time-to-now"></span><span class="my-face">(â—'â—¡'â—)ï¾‰â™¥</span>
    <br>
    Theme - <a href="https://github.com/dongyuanxin/theme-bmw">BMW</a> | Made With ğŸ’— | Powered by <a href="https://godbmw.com/">GodBMW</a>
    <br>
    
  </p>
</footer>



<script>
const timeToNowDOM = document.querySelector("#time-to-now");
const startTimestamp = new Date(2019, 3, 7).getTime();

const updateTimeStr = () => {
  let offset = parseInt(
      (new Date().getTime() - startTimestamp) / 1000,
      10
    ),
    day = Math.floor(offset / 86400),
    hour = Math.floor((offset % 86400) / 3600),
    minute = Math.floor(((offset % 86400) % 3600) / 60),
    second = Math.floor(((offset % 86400) % 3600) % 60);
  timeToNowDOM.innerHTML =
    day + "å¤©" + hour + "å°æ—¶" + minute + "åˆ†é’Ÿ" + second + "ç§’";
  setTimeout(updateTimeStr, 500);
}

setTimeout(updateTimeStr, 500);
</script>


      <div class="back-to-top hidden">
  <span>
    <i class="iconfont icon-60"></i><span></span>%
  </span>
</div>

<script>
const updateIconToTop = percent => {
  let dom = document.querySelector(".back-to-top span span");
  dom.innerText = percent;
  if(percent < 1) {
    document.querySelector(".back-to-top").className = "back-to-top hidden";
  } else {
    document.querySelector(".back-to-top").className = "back-to-top";
  }
}

const handleScoll = () => {
  let isRunning = false;
  return () => {
    if (isRunning) return;
    isRunning = true;
    window.requestAnimationFrame(timestamp => {
      let scrollTop =
          document.documentElement.scrollTop || document.body.scrollTop,
        scrollHeight =
          document.documentElement.scrollHeight ||
          document.body.scrollHeight,
        clientHeight =
          document.documentElement.clientHeight ||
          document.body.clientHeight;
      isRunning = false;
      if (scrollTop <= 1) {
        updateIconToTop(0);
        return;
      }
      if (scrollTop + clientHeight >= scrollHeight) {
        updateIconToTop(100);
      } else {
        updateIconToTop(parseInt(
          100 * scrollTop / (scrollHeight - clientHeight),
          10
        ));
      }
    });
  };
}

const backToTop = () => {
  let scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop,
    delay = 10,
    time = 200;
  if (scrollTop <= 20) {
    document.documentElement.scrollTop = 0;
    document.body.scrollTop = 0;
    return;
  }
  let step = Math.ceil(scrollTop * delay / time);
  let timer = setInterval(() => {
    scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop;
    if (scrollTop - step <= 0) {
      document.documentElement.scrollTop = 0;
      document.body.scrollTop = 0;
      clearInterval(timer);
    } else {
      document.documentElement.scrollTop = scrollTop - step;
      document.body.scrollTop = scrollTop - step;
    }
  }, delay);
}

document.addEventListener("scroll", handleScoll(), false);

document.querySelector(".back-to-top").addEventListener("click", backToTop, false);

</script>

    </div>

    
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<script>
  (() => {
    const mathjaxConfig = {
      showProcessingMessages: false, //å…³é—­jsåŠ è½½è¿‡ç¨‹ä¿¡æ¯
      messageStyle: "none", //ä¸æ˜¾ç¤ºä¿¡æ¯
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]], //è¡Œå†…å…¬å¼é€‰æ‹©ç¬¦
        displayMath: [["$$", "$$"], ["\\[", "\\]"]], //æ®µå†…å…¬å¼é€‰æ‹©ç¬¦
        skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"] //é¿å¼€æŸäº›æ ‡ç­¾
      },
      "HTML-CSS": {
        availableFonts: ["STIX", "TeX"], //å¯é€‰å­—ä½“
        showMathMenu: false //å…³é—­å³å‡»èœå•æ˜¾ç¤º
      }
    }

    let mathjaxInterval = setInterval(() => {
      if(!window.MathJax){
        return;
      }
      window.MathJax.Hub.Config(mathjaxConfig)
      window.MathJax.Hub.Queue(["Typeset", MathJax.Hub, document.getElementById('app')])

      clearInterval(mathjaxInterval)
    }, 10)    
  })()
</script>
    

    <script src="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script>
<script async>
  let fancyTimer = setInterval(function(){
    if(!window.$){
      return;
    }
    $(document).ready(function() {
      $(".post img").each(function () {
        if($(this).parent().get(0).tagName.toLowerCase() === "a") {
          return;
        }
        // $(this).attr("data-fancybox", "gallery"); // if you add 'data-fancybox', img will display after showed
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "gallery");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      });
      
      clearInterval(fancyTimer);
    });
  }, 10);
</script>

    
  </body>

</html>
